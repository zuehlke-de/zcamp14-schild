console.log('Alive.');

var fs = require('fs');

/*
function SaveConfig() {
    var pairs = new Object();
    pairs['testkey'] = 'testvalue1';
    pairs['key2']    = 'buh!';

    var content = '';
    for (pair in pairs) {
        console.log('pair.key=' + pair + ', value=' + pairs[pair]);
        content = content + pair + '=' + pairs[pair] + '\n';
    }

    fs.writeFileSync('test_schild_state', content);
}

SaveConfig();
*/

/*
var fileContents = '';

var readable = fs.createReadStream('schild_state');
readable.setEncoding('utf8');
readable.on('data', function(chunk) {
    fileContents = fileContents.concat(chunk);
})

readable.on('end', function() {
    console.log('contents=' + fileContents);

    var lines = fileContents.split('\n');
    console.log('lines=' + lines);

    var pairs = new Object();
    for (i = 0; i < lines.length; i++) {
        var line = lines[i];
        var tokens = line.split('=');
        if (tokens.length != 2)
            continue;
        console.log('    tokens=' + tokens + ', num=' + tokens.length);

        var key   = tokens[0];
        var value = tokens[1];
        key   = key.trim();
        value = value.trim();
        pairs[key] = value;
    }

    console.log('room_name=' + pairs['room_name']);
})
*/

var buffer = fs.readFileSync('test_schild_state');
console.log('content=' + buffer.toString());



console.log('done');


